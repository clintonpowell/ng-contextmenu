<!DOCTYPE html>
<html ng-app="testApp">

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="ng-contextmenu : Lightweight Angular context menu module, styled after Google Chrome context menu ">

    <script src="angular.min.js" type="text/javascript"></script>
    <script src="angular-sanitize.min.js" type="text/javascript"></script>
    <script src="ng-contextmenu.js" type="text/javascript"></script>

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="screen" href="ng-contextmenu.css">
    <style type="text/css">
      li {
        cursor: pointer;
      }
      li > span {
        display: inline-block;
        width: 100px;
      }
      li > input {
        display: inline-block;
        width: 100px;
      }
    </style>
    <script>
      var testApp = angular.module('testApp', ['ng-contextmenu']);
      testApp.controller('mainCtrl', ['$scope','$rootScope', 'ngContextmenuService', function($scope, $rootScope, contextMenu) {
        $scope.title = "Home";
        contextMenu.clickHandler = function(item, data) {
          if(item.fn)
            item.fn(data);
        };

        $scope.edit = function(data) {
          data.renaming = false;
          data.editing = true;
        };

        $scope.saveEdits = function(data) {
          data.renaming = data.editing = false;
        };

        $scope.rename = function(data) {
          data.renaming = true;
          data.editing = false;
        };

        $scope.delete = function(data) {
          $scope.workItems.splice($scope.workItems.indexOf(data), 1);
        };

        $scope.addMenu = [
          {
            title: 'Add New',
            fn: function() {
              var newItem = { editing: true, renaming: true, name: '', amount: 0};
              $scope.workItems.push(newItem);
            }
          }
        ];

        $scope.menuItems = [
          {
            title: 'Edit',
            fn: $scope.edit
          },
          {
            title: 'Rename',
            fn: $scope.rename
          },
          {
            divider: true
          },
          {
            title: 'Add New',
            fn: function() {
              var newItem = { editing: true, renaming: true, name: '', amount: 0};
              $scope.workItems.push(newItem);
            }
          },
          {
            title: 'Delete',
            fn: $scope.delete
          }
        ];
        $scope.workItems = [
          {
            name: 'Item 1',
            amount: 52
          },
          {
            name: 'Item 2',
            amount: 20
          },
          {
            name: 'Item 3',
            amount: 23
          },
          {
            name: 'Item 4',
            amount: 76
          }
        ]
      }]);
    </script>
</head>

    <title>ng-contextmenu</title>
  </head>

  <body ng-controller="mainCtrl">

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/clintonpowell/ng-contextmenu">View on GitHub</a>

          <h1 id="project_title">ng-contextmenu</h1>
          <h2 id="project_tagline">Lightweight Angular context menu module, styled after Google Chrome context menu </h2>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2>Example</h2>
        <div>(right-click or long-tap 'Work Items', or any list item)</div>

        <h4 ng-contextmenu="addMenu">Work Items:</h4>
        <ul>
          <li ng-repeat="item in workItems" ng-contextmenu="menuItems" ng-contextmenu-data="item">
            <span ng-bind="item.name" ng-show="!item.renaming"></span>
            <input type="text" size="6"  ng-model="item.name" ng-show="item.renaming" />

            <span ng-bind="'$'+item.amount" ng-show="!item.editing"></span>
            <input type="number" ng-model="item.amount" ng-show="item.editing" />
            <button ng-show="item.editing || item.renaming" ng-click="saveEdits(item)">Save</button>
          </li>
        </ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">ng-contextmenu maintained by <a href="https://github.com/clintonpowell">clintonpowell</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>
    <div ng-contextmenu-container></div>
  </body>
</html>
